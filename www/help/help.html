<!DOCTYPE HTML>

<div class="container col-xxl-6 px-4 pt-1">
  <div class="row flex-lg-row align-items-center py-5">

    <h1 class="display-3 fw-bold text-body-emphasis lh-1 mb-3">ShinyABCi help</h1>
    <p class="lead">
      The first section covers the use of the app. Click
      <a href="#anchor-calc">here</a> to jump to the next section, which details
      the calculation of the ABCI values.
    </p>

    <h1 id="anchor-howto">How to use ShinyABCi</h1>
    <p class="lead">
      Interpretation and visualization of checkerboard assays.
    </p>

    <h3>1. Prepare your data</h3>
    <p>
      ShinyABCi takes any form of checkerboard assay data (e.g. crystal
      violet or TTC) in the same format produced by microplate readers. Data can
      be provided as direct measurements (absorbance, fluorescence) or relative
      measurements (percentage of untreated or relative to an external control).
      ABCI was designed for antibiofilm activity data but can be used for any
      kind of checkerboard assays, including planktonic experiments (see the
      <a href="#anchor-calc">ABCI calculations</a> tutorial for more
      information).
    </p>
    <p>
      We provide input templates in .xslx or .ods  format. The only necessary
      preprocessing step is <b>blank subtraction</b>: if it has not been
      performed by the microplate reader software, please subtract the blank before
      uploading your data.
    </p>
    <p>
      You can upload different <b>experiments</b> as sheets in the input file;
      they will become different panels in the final graph. Each experiment can
      have any number of <b>replicates</b>, which must be provided as individual
      tables within the same sheet separated by at least one blank row. Not all
      treatment concentrations need to be represented in every replicate.
    </p>
    <p>
      Data must include untreated wells (concentration = 0). Do not include in
      the input any wells that are not intended to be plotted in the final
      graph (e.g. blank wells or external controls).
    </p>
    <img src="help/input_template.png" alt="Input template" style="width: 882px; height: 713px" class="center">

    <h3 class="mt-4">2. Upload and analyze your data</h3>
    <p>
      Click <b>"Upload plate data"</b> and select an .xlsx or .ods file
      formatted as detailed above. An input preview will appear to the right of
      the screen detailing the treatment in the rows and columns of each of your
      experiments, as well as the different concentrations included. Make sure
      everything looks OK and click "Perform ABCI calculations". If the
      preview does not reflect your intended input, the most likely reason is a
      mistake in the input file; try downloading the template and copying and
      pasting your data onto it.
    </p>
    <img src="help/input_preview.png" alt="Input preview" style="width: 880px; height: 460px" class="center">
    <p>
      After clicking "Perform ABCI calculations", a dialogue window will appear
      with two options for data normalization. By default, ShinyABCi will assume
      your data is direct observations (e.g., absorbance units or relative
      fluorescence units) and convert them into percentages relative to the
      average of the untreated wells (both concentrations equal to zero). This
      is the <b>"Normalize my data"</b> option. If you have already converted
      your data to percentages (for example, to make them relative to a growth
      control consisting of multiple wells per plate), select <b>"My data is
      already normalized"</b> instead.
    </p>
    <p>
      Once you have made the appropriate selection, click "Calculate ABCI
      values", which will perform the analysis and take you to the "Results"
      tab.
    </p>

    <h3 class="mt-4">3. Create plots from your results</h3>
    <p>ShinyABCi lets you visualize two types of information:</p>
    <ul>
      <li>
        <b>Drug interaction (Anti-Biofilm Combination Index)</b>. Positive
        values indicate a drug combination that presents higher antimicrobial
        activity at the given concentrations than any of the individual drugs
        on their own (additive or synergistic behaviour). Negative values
        indicate a combination with worse activity than at least the best of the
        individual drugs (antagonism). See the
        <a href="#anchor-calc">ABCI calculations</a> tutorial for more
        information.
      </li>
      <li>
        <b>Antimicrobial activity (percentage of biomass killed)</b>. Depending
        on the type of experiment, this may have different biological
        interpretations, such as biofilm inhibition or biofilm eradication.
      </li>
    </ul>
    <p>
      The recommended plot for ShinyABCi results is the <b>dot plot</b>, which
      depicts both ABCI values (as colours) and antimicrobial activity (as dot
      sizes). You can also use <b>tile plots</b> to represent only ABCIs; in
      that case, we recommend choosing the drug concentrations you are most
      interested in and representing their antimicrobial activity in a <b>line
      plot</b>. Dot and tile plots are available in <b>split</b> versions that
      separate the positive and negative ABCI values into two different plots
      for visual simplicity.
    </p>
    <img src="help/plot_examples.png" alt="Plot examples" style="width: 880px; height: 702px" class="center">
    <p>
      Choose the type of plot you want and click <b>"Create or update the
      plot"</b>. You can use the options below to modify the plot and click
      "Create or update the plot" again to confirm the changes. Hover over an
      inputs' name to see an explanatory tooltip.
    </p>
    <p>
      At the bottom of the sidebar there are buttons to <b>Download a results
      spreadsheet</b> for your ABCI results (as an XLSX file), or <b>Download
      the plot</b> currently displayed plot as a PNG, SVG, or TIFF image file.
    </p>
    <p>
      Additional buttons can be used to <b>Restore defaults</b>,resetting all
      the  plot inputs to their original state, or to <b>Analyze a new data
      set</b>. Note that the latter option will cause all results and plots to
      be lost, so be sure to save anything you want to keep first!
    </p>

    <h3 class="mt-4">Learn more</h3>
    <div class="accordion" id="accordion1" style="margin-bottom:3rem">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a1_c1" aria-expanded="false" aria-controls="a1_c1">
            Choose the right colour palette
          </button>
        </h2>
        <div id="a1_c1" class="accordion-collapse collapse" data-bs-parent="#accordion1">
          <div class="accordion-body">
            <p>
              ShinyABCi represents ABCI values using continuous non-linear
              palettes designed to highlight the most biologically relevant
              differences. Negative ABCIs are represented with little colour
              variation, as any drug interaction with less antimicrobial
              activity than the individual drugs already indicates of
              antagonistic behaviour.
            </p>
            <p>
              Default ShinyABCi palettes (A) provide a colour gradient for
              positive ABCIs with a contrasting colour for low positives to
              improve the discoverability of positive interactions that fall
              short of formal synergy. Accentuate high ABCI  palettes (B) move
              the contrasting colour to ABCI > 1.0 combinations to attract more
              attention to synergistic behaviour. Positive/negative ABCI
              palettes (C) remove contrasting colours to depict only whether
              drug interactions are positive or negative.
            </p>
            <p>
              <b>We are colourblind friendly</b>. All ShinyABCi palettes are
              designed, to the best of our knowledge, to be accessible for
              people with protanopia, deuteranopia, or tritanopia.
            </p>
            <img src="img/colours_abci.svg" alt="ABCI palettes" style="width: 359px; height: 400px" class="center">
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a1_c2" aria-expanded="false" aria-controls="a1_c2">
            Split positive and negative ABCI values
          </button>
        </h2>
        <div id="a1_c2" class="accordion-collapse collapse" data-bs-parent="#accordion1">
          <div class="accordion-body">
            <p>
              In case you want to focus exclusively on positive or negative
              drug interactions, we offer "split" tile and dot plots, which
              separate the positive and negative ABCI values into two different
              plots.
            </p>
            <p>
              The <b>"filter stringency"</b> option, available in the advanced
              options box exclusively for split plots, lets you choose the
              behaviour of split plots towards indifferent drug interactions
              (ABCI value close to 0). Choose "loose" to display those values on
              both plots or "strict" to hide them.
            </p>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a1_c3" aria-expanded="false" aria-controls="a1_c3">
            Display activity thresholds
          </button>
        </h2>
        <div id="a1_c3" class="accordion-collapse collapse" data-bs-parent="#accordion1">
          <div class="accordion-body">
            <p>
              As a visual aid to interpret drug interaction data, you can plot
              lines indicating thresholds of antimicrobial activity for the
              individual drugs (e.g., MIC, MBIC, MBEC). To activate this option,
              toggle on <b>"Draw activity threshold"</b>. The target killing
              percentage can be modified in the advanced options box; the
              default value is 0.5 (50% killing, e.g. MIC<sub>50</sub>).
            </p>
            <p>
              Antimicrobial activity thresholds are provided exclusively as
              visual indicators and are not used for calculations.
            </p>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a1_c4" aria-expanded="false" aria-controls="a1_c4">
            Make readable line plots
          </button>
        </h2>
        <div id="a1_c4" class="accordion-collapse collapse" data-bs-parent="#accordion1">
          <div class="accordion-body">
            <p>
              Line plots are simple representations of the antimicrobial
              activity of your drug combinations. Given the number of
              concentrations often evaluated in checkerboard assays, full line
              plots of all your data may be hard to read. We recommend first
              using ABCI plots to identify the most relevant concentrations and
              represent only those in the line plot.
            </p>
            <p>
              By default, ShinyABCi's line plots gently nudge some values along
              the X axis to prevent overlapping lines. This can be disabled by
              toggling off the "X axis jitter" in the advanced options box.
            </p>
          </div>
        </div>
      </div>
    </div>


    <br>
    <hr>


    <h1 class="mt-3" id="anchor-calc">ABCI calculations</h1>
    <p class="lead">
      Information about the Anti-Biofilm Combination Index and how ShinyABCi
      calculates and plots the data.
    </p>

    <h3>Rationale behind ShinyABCi</h3>
    <p>
      Placeholder text.
    </p>

    <h3 class="mt-4">Anti-Biofilm Combination Index</h3>
    <p>
      The Anti-Biofilm Combination Index (ABCI) is calculated for each specific
      combination of drug concentrations (i.e., each well on a 96-well plate).
      It is designed to assess drug combination therapy without relying on
      antimicrobial activity thresholds (e.g., MIC), focusing on the most
      important difference when making therapy decisions: is the drug
      combination better than using the best individual drug on its own?
    </p>
    <p>
      ABCI is defined as the difference between the percentage of biomass
      killed by the drug combination and the percentage killed by the best of
      the individual drugs, divided by the combined effects of the two
      individual drugs. It can be calculated as follows:
    </p>
    <img src="help/abci_formula.png" alt="ABCI formula" style="width: 600px; height: 163px" class="center">
    <p>The resulting ABCI value can then be interpreted as follows:</p>
    <ul>
      <li>
        A positive ABCI indicates that the drug combination presents higher
        activity than any of the individual drugs (<b>additive or synergistic
        behaviour</b>). Higher ABCI values indicate a more significant gain in
        antimicrobial activity relative to the combined effects of the
        individual drugs.
      </li>
      <li>
        An ABCI of zero indicates that the drug combination presents the same
        activity as at least the best of the individual drugs (<b>indifferent
        behaviour</b>).
      </li>
      <li>
        A negative ABCI indicates that the drug combination presents lower
        activity than at least the best of the individual drugs (<b>antagonistic
        behaviour</b>). Lower ABCI values indicate a more significant loss in
        antimicrobial activity relative to the combined effects of the
        individual drugs.
      </li>
    </ul>
    <p>
      The following table illustrates possible ABCI values and their
      interpretation depending on the combined effects of two drugs A and B:
    </p>


    <table class="table table-bordered">
      <thead>
        <tr class="table-light">
          <th scope="col">Killing for Drug A</th>
          <th scope="col">Killing for Drug B</th>
          <th scope="col">Combined Killing</th>
          <th scope="col">Interaction Type</th>
          <th scope="col">ABCI Value</th>
        </tr>
      </thead>
      <tr class="table-danger">
        <td>30%</td>
        <td>30%</td>
        <td>100%</td>
        <td>Synergistic</td>
        <td>2.33</td>
      </tr>
      <tr class="table-danger">
        <td>40%</td>
        <td>40%</td>
        <td>80%</td>
        <td>Perfectly additive</td>
        <td>1.00</td>
      </tr>
      <tr class="table-warning">
        <td>50%</td>
        <td>50%</td>
        <td>90%</td>
        <td>Imperfectly additive</td>
        <td>0.80</td>
      </tr>
      <tr>
        <td>70%</td>
        <td>70%</td>
        <td>70%</td>
        <td>Indifferent</td>
        <td>0.00</td>
      </tr>
      <tr class="table-primary">
        <td>20%</td>
        <td>90%</td>
        <td>80%</td>
        <td>Antagonistic</td>
        <td>-0.18</td>
      </tr>
      <tr class="table-primary">
        <td>70%</td>
        <td>70%</td>
        <td>50%</td>
        <td>Antagonistic</td>
        <td>-0.29</td>
      </tr>
    </table>

    <h3 class="mt-4">Data processing in ShinyABCi</h3>
    <p>
      Placeholder text.
    </p>

    <h3 class="mt-4">Learn more</h3>

    <div class="accordion" id="accordion2">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2_c1" aria-expanded="false" aria-controls="a2_c1">
            <p class="mb-0">Generalized ABCI for <i>n</i> drugs</p>
          </button>
        </h2>
        <div id="a2_c1" class="accordion-collapse collapse" data-bs-parent="#accordion2">
          <div class="accordion-body">
            <p>
              Placeholder text.
            </p>
            <img src="help/abci_formula_general.png" alt="Generalized ABCI formula" style="width: 600px; height: 166px" class="center">
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2_c2" aria-expanded="false" aria-controls="a2_c2">
            Dot size scaling in ShinyABCi plots
          </button>
        </h2>
        <div id="a2_c2" class="accordion-collapse collapse" data-bs-parent="#accordion2">
          <div class="accordion-body">
            <p>
              By default, ShinyABCi's dot plots represent antimicrobial activity
              (percentage of biomass killed) using a continuous non-linear scale
              designed to highlight the most biologically relevant differences.
              More specifically, while preserving some degree of granularity all
              across the scale, our plots are designed to maximize the size
              difference between ±50% killing (often considered the threshold
              between "active" and "inactive") and the difference between ±85%
              killing. We consider that last difference to be of the utmost
              importance, given that ShinyABCi is primarily intended for
              antibiofilm assays, in which complete eradication is often hard to
              achieve and one of the main reasons to attempt combination
              therapies. Non-linear scaling can be disabled by toggling "Linear
              size scaling" in the advanced plot options.
            </p>
            <p>
              Below, you can see the exact relationship between the percentage
              of biofilm killed and the default dot size used by ShinyABCi.
            </p>
            <img src="help/dot_size_scaling.png" alt="Dot size scaling" style="width: 450px; height: 337px" class="center">
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
